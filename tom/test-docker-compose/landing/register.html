<!DOCTYPE html>
<html lang="en">
<meta content="text/html;charset=UTF-8" http-equiv="content-type"/>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1, user-scalable=no"
          name="viewport">
    <meta content="" name="title"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <link href="#" rel="canonical"/>
    <meta content="" name="author">
    <meta content="no-referrer" name="referrer"/>
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="favicon.ico" rel="icon" type="image/x-icon">
    <title>Đăng ký tài khoản</title>
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,300,400,700,900" rel="stylesheet"
          type="text/css">
    <!-- Custom styles for this template -->
    <link href="build/style.css?v=2.1.2" rel="stylesheet">
</head>
<body id="page-top">

<main id="main-form" style="display: block">
    <div class="custom-dabet">
        <header>
            <div class="container">
                <div class="row">
                    <a class="logo text-center" href="javascript:void(0)">
                        <img alt="" class="img-responsive" src="images/logo.png">
                    </a>
                </div>
                <div class="row">
                    <a class="slogan text-center" href="javascript:void(0)">
                        <img alt="" class="img-responsive" src="images/slogan2.png">
                    </a>
                </div>
            </div>
        </header>
        <section id="form">
            <div class="container">
                <div class="row">
                    <div class="tab-content">
                        <div class="tab-pane fade in active show" id="register">
                            <form action="" class="registration" id="registration" name="registration">
                                <div class="form-group">
                                    <input autocomplete="off" class="form-control" id="username" name="username"
                                           placeholder="Tên đăng nhập" type="text">
                                    <i class="fas fa-user icon-prepend"></i>
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="password" name="password" placeholder="Mật khẩu"
                                           type="password">
                                    <i class="far fa-eye pw"></i>
                                    <i class="fas fa-lock icon-prepend"></i>
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="confirm_password" name="confirm_password"
                                           placeholder="Nhập lại mật khẩu"
                                           type="password">
                                    <i class="far fa-eye pw"></i>
                                    <i class="fas fa-lock icon-prepend"></i>
                                </div>
                                <div class="form-group mb-3">
                                    <input autocomplete="off" class="form-control" id="phone" name="phone"
                                           placeholder="Số điện thoại" type="tel">
                                    <i class="fas fa-mobile-alt icon-prepend"></i>
                                </div>
                                <div class="form-group btn_style mb-0">
                                    <button class="btnsubmit" type="button">
                                        <img alt="" src="images/btn-dangky2.png" width="100%"/>
                                    </button>
                                </div>
                            </form>
                        </div>
                        <div id="games">
                            <div class="container">
                                <div class="row">
                                    <ul class="d-flex">
                                        <li>
                                            <a href="javascript:;">
                                                <img src="images/game1.png">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:;">
                                                <img src="images/game2.png">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="javascript:;">
                                                <img src="images/game3.png">
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</main>

<!-- Bootstrap core JavaScript -->
<script crossorigin="anonymous"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="build/app.js"></script>
<script>
    // Wait for the DOM to be ready
    $(function () {
        // Initialize form validation on the registration form.
        // It has the name attribute "registration"

        $("form[name='registration']").validate({
            // Specify validation rules
            rules: {
                // The key name on the left side is the name attribute
                // of an input field. Validation rules are defined
                // on the right side
                username: {
                    required: !0,
                    minlength: 6,
                    maxlength: 17,
                },
                phone: {
                    required: !0,
                    minlength: 10,
                    maxlength: 12
                },
                password: {
                    required: true,
                    minlength: 6
                },
                confirm_password: {
                    required: !0,
                    equalTo: "#password"
                },
            },
            // Specify validation error messages
            messages: {
                username: {
                    required: "Vui lòng nhập tên đăng nhập",
                    minlength: "Tên đăng nhập ít nhất 6 ký tự",
                    maxlength: "Tên đăng nhập tối đa 30 ký tự",
                    regex: "Tên đăng nhập không hợp lệ"
                },
                password: {
                    required: "Vui lòng nhập mật khẩu",
                    minlength: "Mật khẩu tối thiểu 6 ký tự",
                    regex: "Mật khẩu không hợp lệ"
                },
                confirm_password: {
                    required: "Vui lòng nhập mật khẩu",
                    equalTo: "Nhập lại mật khẩu không đúng"
                },
                phone: {
                    required: "Vui lòng nhập số điện thoại",
                    regex: "Số điện thoại không hợp lệ",
                    minlength: "Số điện thoại tối thiểu 10 số",
                    maxlength: "Số điện thoại tối đa 12 số"
                }
            },
            // Make sure the form is submitted to the destination defined
            // in the "action" attribute of the form when valid
            submitHandler: function (form) {
                form.submit();
            }
        });
    });
</script>

<script>
    $(document).on('click', '.btnsubmit', function () {
        let name = $('#username').val();
        let password = $('#password').val();
        let password_confirmation = $('#confirm_password').val();
        let phone = $('#phone').val();
        let body = {
            'username': name,
            'password': password,
            'password_confirmation': password_confirmation,
            'phone': phone,
        };
        console.log(body);
        $.ajax({
            url: 'https://tl433.com/api/remote-register',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(body),
            success: function (data) {
                swal("Đăng ký thành công!", "Bạn sẽ được chuyển sang trang đăng nhập!", "success");
                window.location.href = "https://tl433.com/login";
            },
            error: function (xhr) { // if error occured
                swal("Đã có lỗi", "Vui lòng thử lại!", xhr);
            },
        });
    });
</script>
</body>
</html>
